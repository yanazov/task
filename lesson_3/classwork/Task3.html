<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8" />
      <title>Task 3</title>
      <link rel="stylesheet" href="css/normalize.css" />
      <link rel="stylesheet" href="css/style.css" />
   </head>
   <body>
      <div class="wrap" id="wrap">
         <h1>Переключение слайдера</h1>
         <div class="roadMap__container yellow">
         <button class="navButton" data-direction="<"> Prev </button>
         <div class="roadMap">
            <div class="roadMapPoint" data-id="1"></div>
            <div class="roadMapPoint ball" data-id="2"></div>
            <div class="roadMapPoint" data-id="3"></div>
            <div class="roadMapPoint" data-id="4"></div>
            <div class="roadMapPoint" data-id="5"></div>
            <div class="roadMapPoint" data-id="6"></div>
            <div class="roadMapPoint" data-id="7"></div>
            <div class="roadMapPoint" data-id="8"></div>
         </div>
         <button class="navButton" data-direction=">"> Next </button>
         </div>

         <div class="roadMap__container red">
         <button class="navButton" data-direction="<"> Prev </button>
         <div class="roadMap">
            <div class="roadMapPoint" data-id="1"></div>
            <div class="roadMapPoint" data-id="2"></div>
            <div class="roadMapPoint ball" data-id="3"></div>
            <div class="roadMapPoint" data-id="4"></div>
            <div class="roadMapPoint" data-id="5"></div>
            <div class="roadMapPoint" data-id="6"></div>
            <div class="roadMapPoint" data-id="7"></div>
         </div>
         <button class="navButton" data-direction=">"> Next </button>
         </div>

         <div class="roadMap__container blue">
         <button class="navButton" data-direction="<"> Prev </button>
         <div class="roadMap">
            <div class="roadMapPoint" data-id="1"></div>
            <div class="roadMapPoint ball" data-id="2"></div>
            <div class="roadMapPoint" data-id="3"></div>
            <div class="roadMapPoint" data-id="4"></div>
         </div>
         <button class="navButton" data-direction=">"> Next </button>
         </div>
         
         <div class="roadMap__container blue">
            <button class="navButton" data-direction="<"> Prev </button>
            <div class="roadMap">
               <div class="roadMapPoint" data-id="1"></div>
               <div class="roadMapPoint ball" data-id="2"></div>
               <div class="roadMapPoint" data-id="3"></div>
               <div class="roadMapPoint" data-id="4"></div>
            </div>
            <button class="navButton" data-direction=">"> Next </button>
         </div>
      </div>
      <script>

         /*
         Задание:

         Написать скрипт, который будет приводить в действие переключалки из разметки.
         И будет перемещать класс ball по точкам в зависимости от нажатой кнопки

         */

         var containers = document.querySelectorAll('.roadMap__container');
         var container_current, id_current;
         containers.forEach( function( container ){
            container.querySelector('button[data-direction = "<"]').addEventListener('click', prev_slide);
            container.querySelector('button[data-direction = ">"]').addEventListener('click', next_slide);
         });

         function prev_slide(){
            container_current = event.target.closest('.roadMap__container');
            id_current = container_current.querySelector('.ball').dataset.id;
            container_current.querySelector('.ball').classList.remove('ball');
            id_current--;
            if(container_current.querySelector('[data-id = "'+id_current+'"]')){
               container_current.querySelector('[data-id = "'+id_current+'"]').classList.add('ball');
            } else {
               container_current.querySelector('.roadMapPoint:last-child').classList.add('ball');
            }
         }

         function next_slide(){
            container_current = event.target.closest('.roadMap__container');
            id_current = container_current.querySelector('.ball').dataset.id;
            container_current.querySelector('.ball').classList.remove('ball');
            id_current++;
            if(container_current.querySelector('[data-id = "'+id_current+'"]')){
               container_current.querySelector('[data-id = "'+id_current+'"]').classList.add('ball');
            } else {
               container_current.querySelector('.roadMapPoint:first-child').classList.add('ball');
            }
         }
      </script>
   </body>

</html>
